{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/teams.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { teamCreateSchema, teamUpdateSchema, type TeamCreateInput } from '@/lib/validation/team-schemas'\n\n/**\n * Get Team Statistics\n * Returns player count and game count for a team\n */\nexport async function getTeamStats(teamId: string): Promise<{\n  playerCount: number\n  gameCount: number\n  error: string | null\n}> {\n  try {\n    // Get player count\n    const { count: playerCount, error: playersError } = await supabaseAdmin\n      .from('players')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (playersError) {\n      console.error('Error counting players:', playersError)\n      return { playerCount: 0, gameCount: 0, error: playersError.message }\n    }\n\n    // Get game count\n    const { count: gameCount, error: gamesError } = await supabaseAdmin\n      .from('games')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (gamesError) {\n      console.error('Error counting games:', gamesError)\n      return { playerCount: playerCount || 0, gameCount: 0, error: gamesError.message }\n    }\n\n    return {\n      playerCount: playerCount || 0,\n      gameCount: gameCount || 0,\n      error: null,\n    }\n  } catch (error) {\n    console.error('Error getting team stats:', error)\n    return { playerCount: 0, gameCount: 0, error: 'Failed to get team stats' }\n  }\n}\n\n/**\n * Create Team\n *\n * Create a new team and add the user as head coach\n *\n * @param input - Team creation data\n * @param userId - User ID to add as head coach\n * @returns Created team and membership\n */\nexport async function createTeam(input: TeamCreateInput, userId: string): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    level: string\n    season: string\n    region: string\n  }\n  membership?: {\n    id: string\n    role: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // Check if user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', userId)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before creating a team',\n        requiresVerification: true,\n      }\n    }\n\n    // Validate input\n    const validatedData = teamCreateSchema.parse(input)\n\n    // 1. Create team\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams')\n      .insert({\n        organization_id: validatedData.organization_id,\n        name: validatedData.name,\n        age_years: validatedData.age_years,\n        level: validatedData.level,\n        season: validatedData.season,\n        region: validatedData.region,\n      })\n      .select()\n      .single()\n\n    if (teamError) {\n      console.error('Failed to create team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to create team',\n      }\n    }\n\n    // 2. Add user as head coach\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: team.id,\n        user_id: userId,\n        role: 'head_coach',\n      })\n      .select('id, role')\n      .single()\n\n    if (membershipError) {\n      console.error('Failed to add user as head coach:', membershipError)\n      // Rollback: delete the team\n      await supabaseAdmin.from('teams').delete().eq('id', team.id)\n      return {\n        success: false,\n        error: 'Failed to add user as head coach',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n      membership,\n    }\n  } catch (error) {\n    console.error('Unexpected error in createTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get User's Teams\n *\n * Fetch all teams the user belongs to\n */\nexport async function getUserTeams(userId: string): Promise<{\n  success: boolean\n  teams?: Array<{\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }>\n  error?: string\n}> {\n  try {\n    const { data: memberships, error } = await supabaseAdmin\n      .from('team_members')\n      .select(\n        `\n        role,\n        teams:team_id (\n          id,\n          name,\n          age_years,\n          level,\n          season,\n          region,\n          organization_id\n        )\n      `\n      )\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to fetch user teams:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch teams',\n      }\n    }\n\n    // Use the teams_with_age_display view for formatted age groups\n    const teamIds = memberships?.map((m: any) => m.teams.id) || []\n\n    if (teamIds.length === 0) {\n      return {\n        success: true,\n        teams: [],\n      }\n    }\n\n    const { data: teamsWithDisplay, error: displayError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .in('id', teamIds)\n\n    if (displayError) {\n      console.error('Failed to fetch teams with display:', displayError)\n      // Fallback to basic data\n      const teams =\n        memberships?.map((m: any) => ({\n          ...m.teams,\n          age_group_display: `${m.teams.age_years}`, // Fallback\n          role: m.role,\n        })) || []\n\n      return {\n        success: true,\n        teams,\n      }\n    }\n\n    // Merge role information\n    const teams = teamsWithDisplay.map((team) => {\n      const membership = memberships?.find((m: any) => m.teams.id === team.id)\n      return {\n        ...team,\n        role: membership?.role || 'member',\n      }\n    })\n\n    return {\n      success: true,\n      teams,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getUserTeams:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team by ID\n *\n * Fetch a single team by ID (with user access check)\n */\nexport async function getTeamById(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }\n  error?: string\n}> {\n  try {\n    // First verify the user has access to this team\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (membershipError || !membership) {\n      return {\n        success: false,\n        error: 'Team not found or you do not have access',\n      }\n    }\n\n    // Fetch team with formatted age group\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .eq('id', teamId)\n      .single()\n\n    if (teamError || !team) {\n      console.error('Failed to fetch team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to fetch team details',\n      }\n    }\n\n    return {\n      success: true,\n      team: {\n        ...team,\n        role: membership.role,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamById:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team\n *\n * Update team details (name, level, season)\n * Note: age_years and region cannot be changed\n */\nexport async function updateTeam(\n  teamId: string,\n  input: { name?: string; level?: string; season?: string }\n): Promise<{\n  success: boolean\n  team?: any\n  error?: string\n}> {\n  try {\n    // Validate input\n    const validatedData = teamUpdateSchema.parse(input)\n\n    const { data: team, error } = await supabaseAdmin\n      .from('teams')\n      .update(validatedData)\n      .eq('id', teamId)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to update team:', error)\n      return {\n        success: false,\n        error: 'Failed to update team',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Delete Team\n *\n * Delete a team (requires head_coach role)\n */\nexport async function deleteTeam(teamId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin.from('teams').delete().eq('id', teamId)\n\n    if (error) {\n      console.error('Failed to delete team:', error)\n      return {\n        success: false,\n        error: 'Failed to delete team',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in deleteTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Members\n *\n * Fetch all members of a team with their user profile info\n */\nexport async function getTeamMembers(teamId: string): Promise<{\n  success: boolean\n  members?: Array<{\n    id: string\n    user_id: string\n    role: string\n    created_at: string\n    email: string\n    full_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    // Get team members\n    const { data: members, error } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id, role, created_at')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: true })\n\n    if (error) {\n      console.error('Failed to fetch team members:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch team members',\n      }\n    }\n\n    if (!members || members.length === 0) {\n      return {\n        success: true,\n        members: [],\n      }\n    }\n\n    // Get user profiles for all members\n    const userIds = members.map((m) => m.user_id)\n    const { data: profiles, error: profilesError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email, full_name')\n      .in('id', userIds)\n\n    if (profilesError) {\n      console.error('Failed to fetch user profiles:', profilesError)\n      // Continue with members data but without profile info\n    }\n\n    // Merge member data with profile data\n    const formattedMembers = members.map((member) => {\n      const profile = profiles?.find((p) => p.id === member.user_id)\n      return {\n        id: member.id,\n        user_id: member.user_id,\n        role: member.role,\n        created_at: member.created_at,\n        email: profile?.email || '',\n        full_name: profile?.full_name || null,\n      }\n    })\n\n    return {\n      success: true,\n      members: formattedMembers,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamMembers:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Add Team Member\n *\n * Add a user to a team by email\n */\nexport async function addTeamMember(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  member?: any\n  error?: string\n}> {\n  try {\n    // 1. Find user by email\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (profileError) {\n      console.error('Error finding user:', profileError)\n      return {\n        success: false,\n        error: 'Error finding user',\n      }\n    }\n\n    if (!profile) {\n      return {\n        success: false,\n        error: 'No user found with this email address',\n      }\n    }\n\n    // 2. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('user_id', profile.id)\n      .maybeSingle()\n\n    if (existingMember) {\n      return {\n        success: false,\n        error: 'User is already a member of this team',\n      }\n    }\n\n    // 3. Add as team member\n    const { data: member, error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: teamId,\n        user_id: profile.id,\n        role: role,\n      })\n      .select()\n      .single()\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add team member',\n      }\n    }\n\n    return {\n      success: true,\n      member,\n    }\n  } catch (error) {\n    console.error('Unexpected error in addTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Remove Team Member\n *\n * Remove a user from a team\n */\nexport async function removeTeamMember(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // Check if this is the last head_coach\n    const { data: headCoaches } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id')\n      .eq('team_id', teamId)\n      .eq('role', 'head_coach')\n\n    if (headCoaches && headCoaches.length === 1 && headCoaches[0].user_id === userId) {\n      return {\n        success: false,\n        error: 'Cannot remove the last head coach. Assign another head coach first.',\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .delete()\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to remove team member:', error)\n      return {\n        success: false,\n        error: 'Failed to remove team member',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in removeTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team Member Role\n *\n * Change a team member's role\n */\nexport async function updateTeamMemberRole(\n  teamId: string,\n  userId: string,\n  newRole: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // If changing FROM head_coach, check if there's another head_coach\n    const { data: currentMember } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (currentMember?.role === 'head_coach' && newRole !== 'head_coach') {\n      // Check if there are other head coaches\n      const { data: headCoaches } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('role', 'head_coach')\n\n      if (headCoaches && headCoaches.length === 1) {\n        return {\n          success: false,\n          error: 'Cannot change role. Team must have at least one head coach.',\n        }\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .update({ role: newRole })\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to update team member role:', error)\n      return {\n        success: false,\n        error: 'Failed to update role',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeamMemberRole:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAsQsB,cAAA,WAAA,GAAA,IAAA,8PAAA,EAAA,8CAAA,mPAAA,EAAA,KAAA,GAAA,yPAAA,EAAA","debugId":null}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/teams.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { teamCreateSchema, teamUpdateSchema, type TeamCreateInput } from '@/lib/validation/team-schemas'\n\n/**\n * Get Team Statistics\n * Returns player count and game count for a team\n */\nexport async function getTeamStats(teamId: string): Promise<{\n  playerCount: number\n  gameCount: number\n  error: string | null\n}> {\n  try {\n    // Get player count\n    const { count: playerCount, error: playersError } = await supabaseAdmin\n      .from('players')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (playersError) {\n      console.error('Error counting players:', playersError)\n      return { playerCount: 0, gameCount: 0, error: playersError.message }\n    }\n\n    // Get game count\n    const { count: gameCount, error: gamesError } = await supabaseAdmin\n      .from('games')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (gamesError) {\n      console.error('Error counting games:', gamesError)\n      return { playerCount: playerCount || 0, gameCount: 0, error: gamesError.message }\n    }\n\n    return {\n      playerCount: playerCount || 0,\n      gameCount: gameCount || 0,\n      error: null,\n    }\n  } catch (error) {\n    console.error('Error getting team stats:', error)\n    return { playerCount: 0, gameCount: 0, error: 'Failed to get team stats' }\n  }\n}\n\n/**\n * Create Team\n *\n * Create a new team and add the user as head coach\n *\n * @param input - Team creation data\n * @param userId - User ID to add as head coach\n * @returns Created team and membership\n */\nexport async function createTeam(input: TeamCreateInput, userId: string): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    level: string\n    season: string\n    region: string\n  }\n  membership?: {\n    id: string\n    role: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // Check if user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', userId)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before creating a team',\n        requiresVerification: true,\n      }\n    }\n\n    // Validate input\n    const validatedData = teamCreateSchema.parse(input)\n\n    // 1. Create team\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams')\n      .insert({\n        organization_id: validatedData.organization_id,\n        name: validatedData.name,\n        age_years: validatedData.age_years,\n        level: validatedData.level,\n        season: validatedData.season,\n        region: validatedData.region,\n      })\n      .select()\n      .single()\n\n    if (teamError) {\n      console.error('Failed to create team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to create team',\n      }\n    }\n\n    // 2. Add user as head coach\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: team.id,\n        user_id: userId,\n        role: 'head_coach',\n      })\n      .select('id, role')\n      .single()\n\n    if (membershipError) {\n      console.error('Failed to add user as head coach:', membershipError)\n      // Rollback: delete the team\n      await supabaseAdmin.from('teams').delete().eq('id', team.id)\n      return {\n        success: false,\n        error: 'Failed to add user as head coach',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n      membership,\n    }\n  } catch (error) {\n    console.error('Unexpected error in createTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get User's Teams\n *\n * Fetch all teams the user belongs to\n */\nexport async function getUserTeams(userId: string): Promise<{\n  success: boolean\n  teams?: Array<{\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }>\n  error?: string\n}> {\n  try {\n    const { data: memberships, error } = await supabaseAdmin\n      .from('team_members')\n      .select(\n        `\n        role,\n        teams:team_id (\n          id,\n          name,\n          age_years,\n          level,\n          season,\n          region,\n          organization_id\n        )\n      `\n      )\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to fetch user teams:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch teams',\n      }\n    }\n\n    // Use the teams_with_age_display view for formatted age groups\n    const teamIds = memberships?.map((m: any) => m.teams.id) || []\n\n    if (teamIds.length === 0) {\n      return {\n        success: true,\n        teams: [],\n      }\n    }\n\n    const { data: teamsWithDisplay, error: displayError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .in('id', teamIds)\n\n    if (displayError) {\n      console.error('Failed to fetch teams with display:', displayError)\n      // Fallback to basic data\n      const teams =\n        memberships?.map((m: any) => ({\n          ...m.teams,\n          age_group_display: `${m.teams.age_years}`, // Fallback\n          role: m.role,\n        })) || []\n\n      return {\n        success: true,\n        teams,\n      }\n    }\n\n    // Merge role information\n    const teams = teamsWithDisplay.map((team) => {\n      const membership = memberships?.find((m: any) => m.teams.id === team.id)\n      return {\n        ...team,\n        role: membership?.role || 'member',\n      }\n    })\n\n    return {\n      success: true,\n      teams,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getUserTeams:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team by ID\n *\n * Fetch a single team by ID (with user access check)\n */\nexport async function getTeamById(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }\n  error?: string\n}> {\n  try {\n    // First verify the user has access to this team\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (membershipError || !membership) {\n      return {\n        success: false,\n        error: 'Team not found or you do not have access',\n      }\n    }\n\n    // Fetch team with formatted age group\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .eq('id', teamId)\n      .single()\n\n    if (teamError || !team) {\n      console.error('Failed to fetch team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to fetch team details',\n      }\n    }\n\n    return {\n      success: true,\n      team: {\n        ...team,\n        role: membership.role,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamById:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team\n *\n * Update team details (name, level, season)\n * Note: age_years and region cannot be changed\n */\nexport async function updateTeam(\n  teamId: string,\n  input: { name?: string; level?: string; season?: string }\n): Promise<{\n  success: boolean\n  team?: any\n  error?: string\n}> {\n  try {\n    // Validate input\n    const validatedData = teamUpdateSchema.parse(input)\n\n    const { data: team, error } = await supabaseAdmin\n      .from('teams')\n      .update(validatedData)\n      .eq('id', teamId)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to update team:', error)\n      return {\n        success: false,\n        error: 'Failed to update team',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Delete Team\n *\n * Delete a team (requires head_coach role)\n */\nexport async function deleteTeam(teamId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin.from('teams').delete().eq('id', teamId)\n\n    if (error) {\n      console.error('Failed to delete team:', error)\n      return {\n        success: false,\n        error: 'Failed to delete team',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in deleteTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Members\n *\n * Fetch all members of a team with their user profile info\n */\nexport async function getTeamMembers(teamId: string): Promise<{\n  success: boolean\n  members?: Array<{\n    id: string\n    user_id: string\n    role: string\n    created_at: string\n    email: string\n    full_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    // Get team members\n    const { data: members, error } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id, role, created_at')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: true })\n\n    if (error) {\n      console.error('Failed to fetch team members:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch team members',\n      }\n    }\n\n    if (!members || members.length === 0) {\n      return {\n        success: true,\n        members: [],\n      }\n    }\n\n    // Get user profiles for all members\n    const userIds = members.map((m) => m.user_id)\n    const { data: profiles, error: profilesError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email, full_name')\n      .in('id', userIds)\n\n    if (profilesError) {\n      console.error('Failed to fetch user profiles:', profilesError)\n      // Continue with members data but without profile info\n    }\n\n    // Merge member data with profile data\n    const formattedMembers = members.map((member) => {\n      const profile = profiles?.find((p) => p.id === member.user_id)\n      return {\n        id: member.id,\n        user_id: member.user_id,\n        role: member.role,\n        created_at: member.created_at,\n        email: profile?.email || '',\n        full_name: profile?.full_name || null,\n      }\n    })\n\n    return {\n      success: true,\n      members: formattedMembers,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamMembers:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Add Team Member\n *\n * Add a user to a team by email\n */\nexport async function addTeamMember(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  member?: any\n  error?: string\n}> {\n  try {\n    // 1. Find user by email\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (profileError) {\n      console.error('Error finding user:', profileError)\n      return {\n        success: false,\n        error: 'Error finding user',\n      }\n    }\n\n    if (!profile) {\n      return {\n        success: false,\n        error: 'No user found with this email address',\n      }\n    }\n\n    // 2. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('user_id', profile.id)\n      .maybeSingle()\n\n    if (existingMember) {\n      return {\n        success: false,\n        error: 'User is already a member of this team',\n      }\n    }\n\n    // 3. Add as team member\n    const { data: member, error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: teamId,\n        user_id: profile.id,\n        role: role,\n      })\n      .select()\n      .single()\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add team member',\n      }\n    }\n\n    return {\n      success: true,\n      member,\n    }\n  } catch (error) {\n    console.error('Unexpected error in addTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Remove Team Member\n *\n * Remove a user from a team\n */\nexport async function removeTeamMember(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // Check if this is the last head_coach\n    const { data: headCoaches } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id')\n      .eq('team_id', teamId)\n      .eq('role', 'head_coach')\n\n    if (headCoaches && headCoaches.length === 1 && headCoaches[0].user_id === userId) {\n      return {\n        success: false,\n        error: 'Cannot remove the last head coach. Assign another head coach first.',\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .delete()\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to remove team member:', error)\n      return {\n        success: false,\n        error: 'Failed to remove team member',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in removeTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team Member Role\n *\n * Change a team member's role\n */\nexport async function updateTeamMemberRole(\n  teamId: string,\n  userId: string,\n  newRole: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // If changing FROM head_coach, check if there's another head_coach\n    const { data: currentMember } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (currentMember?.role === 'head_coach' && newRole !== 'head_coach') {\n      // Check if there are other head coaches\n      const { data: headCoaches } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('role', 'head_coach')\n\n      if (headCoaches && headCoaches.length === 1) {\n        return {\n          success: false,\n          error: 'Cannot change role. Team must have at least one head coach.',\n        }\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .update({ role: newRole })\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to update team member role:', error)\n      return {\n        success: false,\n        error: 'Failed to update role',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeamMemberRole:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA6UsB,aAAA,WAAA,GAAA,IAAA,8PAAA,EAAA,8CAAA,mPAAA,EAAA,KAAA,GAAA,yPAAA,EAAA","debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/teams.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { teamCreateSchema, teamUpdateSchema, type TeamCreateInput } from '@/lib/validation/team-schemas'\n\n/**\n * Get Team Statistics\n * Returns player count and game count for a team\n */\nexport async function getTeamStats(teamId: string): Promise<{\n  playerCount: number\n  gameCount: number\n  error: string | null\n}> {\n  try {\n    // Get player count\n    const { count: playerCount, error: playersError } = await supabaseAdmin\n      .from('players')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (playersError) {\n      console.error('Error counting players:', playersError)\n      return { playerCount: 0, gameCount: 0, error: playersError.message }\n    }\n\n    // Get game count\n    const { count: gameCount, error: gamesError } = await supabaseAdmin\n      .from('games')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (gamesError) {\n      console.error('Error counting games:', gamesError)\n      return { playerCount: playerCount || 0, gameCount: 0, error: gamesError.message }\n    }\n\n    return {\n      playerCount: playerCount || 0,\n      gameCount: gameCount || 0,\n      error: null,\n    }\n  } catch (error) {\n    console.error('Error getting team stats:', error)\n    return { playerCount: 0, gameCount: 0, error: 'Failed to get team stats' }\n  }\n}\n\n/**\n * Create Team\n *\n * Create a new team and add the user as head coach\n *\n * @param input - Team creation data\n * @param userId - User ID to add as head coach\n * @returns Created team and membership\n */\nexport async function createTeam(input: TeamCreateInput, userId: string): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    level: string\n    season: string\n    region: string\n  }\n  membership?: {\n    id: string\n    role: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // Check if user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', userId)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before creating a team',\n        requiresVerification: true,\n      }\n    }\n\n    // Validate input\n    const validatedData = teamCreateSchema.parse(input)\n\n    // 1. Create team\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams')\n      .insert({\n        organization_id: validatedData.organization_id,\n        name: validatedData.name,\n        age_years: validatedData.age_years,\n        level: validatedData.level,\n        season: validatedData.season,\n        region: validatedData.region,\n      })\n      .select()\n      .single()\n\n    if (teamError) {\n      console.error('Failed to create team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to create team',\n      }\n    }\n\n    // 2. Add user as head coach\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: team.id,\n        user_id: userId,\n        role: 'head_coach',\n      })\n      .select('id, role')\n      .single()\n\n    if (membershipError) {\n      console.error('Failed to add user as head coach:', membershipError)\n      // Rollback: delete the team\n      await supabaseAdmin.from('teams').delete().eq('id', team.id)\n      return {\n        success: false,\n        error: 'Failed to add user as head coach',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n      membership,\n    }\n  } catch (error) {\n    console.error('Unexpected error in createTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get User's Teams\n *\n * Fetch all teams the user belongs to\n */\nexport async function getUserTeams(userId: string): Promise<{\n  success: boolean\n  teams?: Array<{\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }>\n  error?: string\n}> {\n  try {\n    const { data: memberships, error } = await supabaseAdmin\n      .from('team_members')\n      .select(\n        `\n        role,\n        teams:team_id (\n          id,\n          name,\n          age_years,\n          level,\n          season,\n          region,\n          organization_id\n        )\n      `\n      )\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to fetch user teams:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch teams',\n      }\n    }\n\n    // Use the teams_with_age_display view for formatted age groups\n    const teamIds = memberships?.map((m: any) => m.teams.id) || []\n\n    if (teamIds.length === 0) {\n      return {\n        success: true,\n        teams: [],\n      }\n    }\n\n    const { data: teamsWithDisplay, error: displayError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .in('id', teamIds)\n\n    if (displayError) {\n      console.error('Failed to fetch teams with display:', displayError)\n      // Fallback to basic data\n      const teams =\n        memberships?.map((m: any) => ({\n          ...m.teams,\n          age_group_display: `${m.teams.age_years}`, // Fallback\n          role: m.role,\n        })) || []\n\n      return {\n        success: true,\n        teams,\n      }\n    }\n\n    // Merge role information\n    const teams = teamsWithDisplay.map((team) => {\n      const membership = memberships?.find((m: any) => m.teams.id === team.id)\n      return {\n        ...team,\n        role: membership?.role || 'member',\n      }\n    })\n\n    return {\n      success: true,\n      teams,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getUserTeams:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team by ID\n *\n * Fetch a single team by ID (with user access check)\n */\nexport async function getTeamById(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }\n  error?: string\n}> {\n  try {\n    // First verify the user has access to this team\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (membershipError || !membership) {\n      return {\n        success: false,\n        error: 'Team not found or you do not have access',\n      }\n    }\n\n    // Fetch team with formatted age group\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .eq('id', teamId)\n      .single()\n\n    if (teamError || !team) {\n      console.error('Failed to fetch team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to fetch team details',\n      }\n    }\n\n    return {\n      success: true,\n      team: {\n        ...team,\n        role: membership.role,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamById:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team\n *\n * Update team details (name, level, season)\n * Note: age_years and region cannot be changed\n */\nexport async function updateTeam(\n  teamId: string,\n  input: { name?: string; level?: string; season?: string }\n): Promise<{\n  success: boolean\n  team?: any\n  error?: string\n}> {\n  try {\n    // Validate input\n    const validatedData = teamUpdateSchema.parse(input)\n\n    const { data: team, error } = await supabaseAdmin\n      .from('teams')\n      .update(validatedData)\n      .eq('id', teamId)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to update team:', error)\n      return {\n        success: false,\n        error: 'Failed to update team',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Delete Team\n *\n * Delete a team (requires head_coach role)\n */\nexport async function deleteTeam(teamId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin.from('teams').delete().eq('id', teamId)\n\n    if (error) {\n      console.error('Failed to delete team:', error)\n      return {\n        success: false,\n        error: 'Failed to delete team',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in deleteTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Members\n *\n * Fetch all members of a team with their user profile info\n */\nexport async function getTeamMembers(teamId: string): Promise<{\n  success: boolean\n  members?: Array<{\n    id: string\n    user_id: string\n    role: string\n    created_at: string\n    email: string\n    full_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    // Get team members\n    const { data: members, error } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id, role, created_at')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: true })\n\n    if (error) {\n      console.error('Failed to fetch team members:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch team members',\n      }\n    }\n\n    if (!members || members.length === 0) {\n      return {\n        success: true,\n        members: [],\n      }\n    }\n\n    // Get user profiles for all members\n    const userIds = members.map((m) => m.user_id)\n    const { data: profiles, error: profilesError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email, full_name')\n      .in('id', userIds)\n\n    if (profilesError) {\n      console.error('Failed to fetch user profiles:', profilesError)\n      // Continue with members data but without profile info\n    }\n\n    // Merge member data with profile data\n    const formattedMembers = members.map((member) => {\n      const profile = profiles?.find((p) => p.id === member.user_id)\n      return {\n        id: member.id,\n        user_id: member.user_id,\n        role: member.role,\n        created_at: member.created_at,\n        email: profile?.email || '',\n        full_name: profile?.full_name || null,\n      }\n    })\n\n    return {\n      success: true,\n      members: formattedMembers,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamMembers:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Add Team Member\n *\n * Add a user to a team by email\n */\nexport async function addTeamMember(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  member?: any\n  error?: string\n}> {\n  try {\n    // 1. Find user by email\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (profileError) {\n      console.error('Error finding user:', profileError)\n      return {\n        success: false,\n        error: 'Error finding user',\n      }\n    }\n\n    if (!profile) {\n      return {\n        success: false,\n        error: 'No user found with this email address',\n      }\n    }\n\n    // 2. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('user_id', profile.id)\n      .maybeSingle()\n\n    if (existingMember) {\n      return {\n        success: false,\n        error: 'User is already a member of this team',\n      }\n    }\n\n    // 3. Add as team member\n    const { data: member, error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: teamId,\n        user_id: profile.id,\n        role: role,\n      })\n      .select()\n      .single()\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add team member',\n      }\n    }\n\n    return {\n      success: true,\n      member,\n    }\n  } catch (error) {\n    console.error('Unexpected error in addTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Remove Team Member\n *\n * Remove a user from a team\n */\nexport async function removeTeamMember(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // Check if this is the last head_coach\n    const { data: headCoaches } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id')\n      .eq('team_id', teamId)\n      .eq('role', 'head_coach')\n\n    if (headCoaches && headCoaches.length === 1 && headCoaches[0].user_id === userId) {\n      return {\n        success: false,\n        error: 'Cannot remove the last head coach. Assign another head coach first.',\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .delete()\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to remove team member:', error)\n      return {\n        success: false,\n        error: 'Failed to remove team member',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in removeTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team Member Role\n *\n * Change a team member's role\n */\nexport async function updateTeamMemberRole(\n  teamId: string,\n  userId: string,\n  newRole: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // If changing FROM head_coach, check if there's another head_coach\n    const { data: currentMember } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (currentMember?.role === 'head_coach' && newRole !== 'head_coach') {\n      // Check if there are other head coaches\n      const { data: headCoaches } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('role', 'head_coach')\n\n      if (headCoaches && headCoaches.length === 1) {\n        return {\n          success: false,\n          error: 'Cannot change role. Team must have at least one head coach.',\n        }\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .update({ role: newRole })\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to update team member role:', error)\n      return {\n        success: false,\n        error: 'Failed to update role',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeamMemberRole:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA0XsB,aAAA,WAAA,GAAA,IAAA,8PAAA,EAAA,8CAAA,mPAAA,EAAA,KAAA,GAAA,yPAAA,EAAA","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/lib/validation/team-schemas.ts"],"sourcesContent":["import { z } from 'zod'\n\n/**\n * Team Validation Schemas\n *\n * Zod schemas for creating and updating teams.\n * Used with React Hook Form for client-side validation\n * and server actions for server-side validation.\n */\n\n/**\n * Team Create Schema\n *\n * Validates all required fields for creating a new team\n */\nexport const teamCreateSchema = z.object({\n  organization_id: z.string().uuid('Invalid organization ID'),\n  name: z\n    .string()\n    .min(1, 'Team name is required')\n    .max(100, 'Team name must be less than 100 characters'),\n  age_years: z\n    .number()\n    .int('Age must be a whole number')\n    .min(6, 'Age must be at least 6')\n    .max(21, 'Age must be 21 or less'),\n  level: z.enum(['house', 'travel', 'aaa', 'aa', 'a'], {\n    errorMap: () => ({ message: 'Please select a skill level' }),\n  }),\n  season: z\n    .string()\n    .regex(/^\\d{4}-\\d{2}$/, 'Season must be in format YYYY-YY (e.g., 2024-25)')\n    .refine(\n      (season) => {\n        const [startYear, endYear] = season.split('-').map(Number)\n        return endYear === (startYear + 1) % 100\n      },\n      { message: 'Invalid season format (e.g., 2024-25)' }\n    ),\n  region: z.enum(['usa', 'canada'], {\n    errorMap: () => ({ message: 'Please select a region' }),\n  }).default('usa'),\n})\n\nexport type TeamCreateInput = z.infer<typeof teamCreateSchema>\n\n/**\n * Team Update Schema\n *\n * Similar to create, but all fields optional (for partial updates)\n * Note: age_years cannot be changed once set (business rule)\n */\nexport const teamUpdateSchema = z.object({\n  name: z\n    .string()\n    .min(1, 'Team name is required')\n    .max(100, 'Team name must be less than 100 characters')\n    .optional(),\n  level: z.enum(['house', 'travel', 'aaa', 'aa', 'a']).optional(),\n  season: z\n    .string()\n    .regex(/^\\d{4}-\\d{2}$/, 'Season must be in format YYYY-YY')\n    .optional(),\n  // Note: age_years and region are intentionally excluded (cannot be changed)\n})\n\nexport type TeamUpdateInput = z.infer<typeof teamUpdateSchema>\n\n/**\n * Helper: Get current season string\n *\n * @returns Current season in YYYY-YY format (e.g., \"2024-25\")\n */\nexport function getCurrentSeason(): string {\n  const now = new Date()\n  const month = now.getMonth() + 1 // 0-indexed\n\n  // Hockey season starts in September (month 9)\n  // If before September, we're in the season that started last year\n  // If September or after, we're in the season starting this year\n  const startYear = month < 9 ? now.getFullYear() - 1 : now.getFullYear()\n  const endYear = startYear + 1\n\n  return `${startYear}-${String(endYear).slice(2)}` // \"2024-25\"\n}\n\n/**\n * Helper: Parse season string to years\n *\n * @param season - Season string like \"2024-25\"\n * @returns { startYear: 2024, endYear: 2025 }\n */\nexport function parseSeason(season: string): { startYear: number; endYear: number } | null {\n  const match = season.match(/^(\\d{4})-(\\d{2})$/)\n  if (!match) return null\n\n  const startYear = parseInt(match[1])\n  const endYear = 2000 + parseInt(match[2])\n\n  return { startYear, endYear }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAeO,MAAM,mBAAmB,iMAAC,CAAC,MAAM,CAAC;IACvC,iBAAiB,iMAAC,CAAC,MAAM,GAAG,IAAI,CAAC;IACjC,MAAM,iMAAC,CACJ,MAAM,GACN,GAAG,CAAC,GAAG,yBACP,GAAG,CAAC,KAAK;IACZ,WAAW,iMAAC,CACT,MAAM,GACN,GAAG,CAAC,8BACJ,GAAG,CAAC,GAAG,0BACP,GAAG,CAAC,IAAI;IACX,OAAO,iMAAC,CAAC,IAAI,CAAC;QAAC;QAAS;QAAU;QAAO;QAAM;KAAI,EAAE;QACnD,UAAU,IAAM,CAAC;gBAAE,SAAS;YAA8B,CAAC;IAC7D;IACA,QAAQ,iMAAC,CACN,MAAM,GACN,KAAK,CAAC,iBAAiB,oDACvB,MAAM,CACL,CAAC;QACC,MAAM,CAAC,WAAW,QAAQ,GAAG,OAAO,KAAK,CAAC,KAAK,GAAG,CAAC;QACnD,OAAO,YAAY,CAAC,YAAY,CAAC,IAAI;IACvC,GACA;QAAE,SAAS;IAAwC;IAEvD,QAAQ,iMAAC,CAAC,IAAI,CAAC;QAAC;QAAO;KAAS,EAAE;QAChC,UAAU,IAAM,CAAC;gBAAE,SAAS;YAAyB,CAAC;IACxD,GAAG,OAAO,CAAC;AACb;AAUO,MAAM,mBAAmB,iMAAC,CAAC,MAAM,CAAC;IACvC,MAAM,iMAAC,CACJ,MAAM,GACN,GAAG,CAAC,GAAG,yBACP,GAAG,CAAC,KAAK,8CACT,QAAQ;IACX,OAAO,iMAAC,CAAC,IAAI,CAAC;QAAC;QAAS;QAAU;QAAO;QAAM;KAAI,EAAE,QAAQ;IAC7D,QAAQ,iMAAC,CACN,MAAM,GACN,KAAK,CAAC,iBAAiB,oCACvB,QAAQ;AAEb;AASO,SAAS;IACd,MAAM,MAAM,IAAI;IAChB,MAAM,QAAQ,IAAI,QAAQ,KAAK,EAAE,YAAY;;IAE7C,8CAA8C;IAC9C,kEAAkE;IAClE,gEAAgE;IAChE,MAAM,YAAY,QAAQ,IAAI,IAAI,WAAW,KAAK,IAAI,IAAI,WAAW;IACrE,MAAM,UAAU,YAAY;IAE5B,OAAO,GAAG,UAAU,CAAC,EAAE,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,YAAY;;AAChE;AAQO,SAAS,YAAY,MAAc;IACxC,MAAM,QAAQ,OAAO,KAAK,CAAC;IAC3B,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,YAAY,SAAS,KAAK,CAAC,EAAE;IACnC,MAAM,UAAU,OAAO,SAAS,KAAK,CAAC,EAAE;IAExC,OAAO;QAAE;QAAW;IAAQ;AAC9B","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/demo/teams/%5BteamId%5D/settings/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter, useParams } from 'next/navigation'\nimport { supabase } from '@/lib/db/supabase'\nimport { getTeamById, updateTeam, deleteTeam } from '@/app/actions/teams'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { teamUpdateSchema, type TeamUpdateInput } from '@/lib/validation/team-schemas'\n\ninterface TeamData {\n  id: string\n  name: string\n  age_years: number\n  age_group_display: string\n  level: string\n  season: string\n  region: string\n  organization_id: string\n  role: string\n}\n\nexport default function TeamSettingsPage() {\n  const router = useRouter()\n  const params = useParams()\n  const teamId = params.teamId as string\n\n  const [team, setTeam] = useState<TeamData | null>(null)\n  const [userId, setUserId] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false)\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isDirty },\n    reset,\n  } = useForm<TeamUpdateInput>({\n    resolver: zodResolver(teamUpdateSchema),\n  })\n\n  useEffect(() => {\n    async function loadTeam() {\n      try {\n        // Get current user\n        const {\n          data: { user },\n          error: userError,\n        } = await supabase.auth.getUser()\n\n        if (userError || !user) {\n          router.push('/demo/teams')\n          return\n        }\n\n        setUserId(user.id)\n\n        // Get team data\n        const result = await getTeamById(teamId, user.id)\n\n        if (result.success && result.team) {\n          // Check if user is head coach\n          if (result.team.role !== 'head_coach') {\n            setError('Only head coaches can access team settings')\n            setIsLoading(false)\n            return\n          }\n\n          setTeam(result.team)\n          // Set form defaults\n          reset({\n            name: result.team.name,\n            level: result.team.level,\n            season: result.team.season,\n          })\n        } else {\n          setError(result.error || 'Failed to load team')\n        }\n      } catch (err) {\n        console.error('Error loading team:', err)\n        setError('An unexpected error occurred')\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    loadTeam()\n  }, [teamId, router, reset])\n\n  const onSubmit = async (data: TeamUpdateInput) => {\n    setIsSubmitting(true)\n    setError(null)\n\n    try {\n      const result = await updateTeam(teamId, data)\n\n      if (result.success) {\n        // Reload team data\n        const updatedTeam = await getTeamById(teamId, userId!)\n        if (updatedTeam.success && updatedTeam.team) {\n          setTeam(updatedTeam.team)\n          reset({\n            name: updatedTeam.team.name,\n            level: updatedTeam.team.level,\n            season: updatedTeam.team.season,\n          })\n        }\n      } else {\n        setError(result.error || 'Failed to update team')\n      }\n    } catch (err) {\n      console.error('Error updating team:', err)\n      setError('An unexpected error occurred')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleDelete = async () => {\n    if (!showDeleteConfirm) {\n      setShowDeleteConfirm(true)\n      return\n    }\n\n    setIsSubmitting(true)\n    setError(null)\n\n    try {\n      const result = await deleteTeam(teamId)\n\n      if (result.success) {\n        router.push('/demo/teams')\n      } else {\n        setError(result.error || 'Failed to delete team')\n        setShowDeleteConfirm(false)\n      }\n    } catch (err) {\n      console.error('Error deleting team:', err)\n      setError('An unexpected error occurred')\n      setShowDeleteConfirm(false)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading team settings...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error && !team) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n            <h2 className=\"text-lg font-bold text-red-900 mb-2\">Error</h2>\n            <p className=\"text-red-700\">{error}</p>\n            <button\n              onClick={() => router.push('/demo/teams')}\n              className=\"mt-4 text-red-600 hover:text-red-800 font-medium\"\n            >\n               Back to Teams\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <button\n            onClick={() => router.push(`/demo/teams/${teamId}`)}\n            className=\"text-blue-600 hover:text-blue-800 font-medium mb-4 inline-flex items-center\"\n          >\n             Back to Team\n          </button>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Team Settings</h1>\n          <p className=\"text-gray-600 mt-2\">{team?.name}</p>\n        </div>\n\n        {/* Error Alert */}\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-700\">{error}</p>\n          </div>\n        )}\n\n        {/* Team Details Form */}\n        <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Team Details</h2>\n\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n            {/* Team Name */}\n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Team Name\n              </label>\n              <input\n                id=\"name\"\n                type=\"text\"\n                {...register('name')}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"e.g., Thunder 2024\"\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.name.message}</p>\n              )}\n            </div>\n\n            {/* Level */}\n            <div>\n              <label htmlFor=\"level\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Level\n              </label>\n              <select\n                id=\"level\"\n                {...register('level')}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"a\">A</option>\n                <option value=\"aa\">AA</option>\n                <option value=\"aaa\">AAA</option>\n                <option value=\"b\">B</option>\n                <option value=\"c\">C</option>\n                <option value=\"rec\">Rec</option>\n              </select>\n              {errors.level && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.level.message}</p>\n              )}\n            </div>\n\n            {/* Season */}\n            <div>\n              <label htmlFor=\"season\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Season\n              </label>\n              <input\n                id=\"season\"\n                type=\"text\"\n                {...register('season')}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"e.g., 2024-25\"\n              />\n              {errors.season && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.season.message}</p>\n              )}\n            </div>\n\n            {/* Read-only fields */}\n            <div className=\"pt-4 border-t border-gray-200\">\n              <p className=\"text-sm text-gray-600 mb-2\">\n                <span className=\"font-medium\">Age Group:</span> {team?.age_group_display}\n              </p>\n              <p className=\"text-sm text-gray-600\">\n                <span className=\"font-medium\">Region:</span> {team?.region.toUpperCase()}\n              </p>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                Age group and region cannot be changed after team creation\n              </p>\n            </div>\n\n            {/* Submit Button */}\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                type=\"submit\"\n                disabled={!isDirty || isSubmitting}\n                className=\"flex-1 bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\n              >\n                {isSubmitting ? 'Saving...' : 'Save Changes'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => reset()}\n                disabled={!isDirty || isSubmitting}\n                className=\"px-6 py-3 border border-gray-300 rounded-md font-medium text-gray-700 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n\n        {/* Danger Zone */}\n        <div className=\"bg-white rounded-lg shadow p-6 border-2 border-red-200\">\n          <h2 className=\"text-xl font-semibold text-red-900 mb-2\">Danger Zone</h2>\n          <p className=\"text-sm text-gray-600 mb-4\">\n            Once you delete a team, there is no going back. All players, games, and events will be permanently deleted.\n          </p>\n\n          {!showDeleteConfirm ? (\n            <button\n              onClick={() => setShowDeleteConfirm(true)}\n              disabled={isSubmitting}\n              className=\"bg-red-600 text-white px-6 py-3 rounded-md font-medium hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\n            >\n              Delete Team\n            </button>\n          ) : (\n            <div className=\"bg-red-50 rounded-lg p-4\">\n              <p className=\"text-red-900 font-semibold mb-4\">\n                Are you absolutely sure? This action cannot be undone.\n              </p>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={handleDelete}\n                  disabled={isSubmitting}\n                  className=\"bg-red-600 text-white px-6 py-3 rounded-md font-medium hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\n                >\n                  {isSubmitting ? 'Deleting...' : 'Yes, Delete Team'}\n                </button>\n                <button\n                  onClick={() => setShowDeleteConfirm(false)}\n                  disabled={isSubmitting}\n                  className=\"px-6 py-3 border border-gray-300 rounded-md font-medium text-gray-700 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}