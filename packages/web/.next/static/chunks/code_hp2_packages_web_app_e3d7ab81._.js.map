{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/teams.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { teamCreateSchema, teamUpdateSchema, type TeamCreateInput } from '@/lib/validation/team-schemas'\n\n/**\n * Get Team Statistics\n * Returns player count and game count for a team\n */\nexport async function getTeamStats(teamId: string): Promise<{\n  playerCount: number\n  gameCount: number\n  error: string | null\n}> {\n  try {\n    // Get player count\n    const { count: playerCount, error: playersError } = await supabaseAdmin\n      .from('players')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (playersError) {\n      console.error('Error counting players:', playersError)\n      return { playerCount: 0, gameCount: 0, error: playersError.message }\n    }\n\n    // Get game count\n    const { count: gameCount, error: gamesError } = await supabaseAdmin\n      .from('games')\n      .select('*', { count: 'exact', head: true })\n      .eq('team_id', teamId)\n\n    if (gamesError) {\n      console.error('Error counting games:', gamesError)\n      return { playerCount: playerCount || 0, gameCount: 0, error: gamesError.message }\n    }\n\n    return {\n      playerCount: playerCount || 0,\n      gameCount: gameCount || 0,\n      error: null,\n    }\n  } catch (error) {\n    console.error('Error getting team stats:', error)\n    return { playerCount: 0, gameCount: 0, error: 'Failed to get team stats' }\n  }\n}\n\n/**\n * Create Team\n *\n * Create a new team and add the user as head coach\n *\n * @param input - Team creation data\n * @param userId - User ID to add as head coach\n * @returns Created team and membership\n */\nexport async function createTeam(input: TeamCreateInput, userId: string): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    level: string\n    season: string\n    region: string\n  }\n  membership?: {\n    id: string\n    role: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // Check if user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', userId)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before creating a team',\n        requiresVerification: true,\n      }\n    }\n\n    // Validate input\n    const validatedData = teamCreateSchema.parse(input)\n\n    // 1. Create team\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams')\n      .insert({\n        organization_id: validatedData.organization_id,\n        name: validatedData.name,\n        age_years: validatedData.age_years,\n        level: validatedData.level,\n        season: validatedData.season,\n        region: validatedData.region,\n      })\n      .select()\n      .single()\n\n    if (teamError) {\n      console.error('Failed to create team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to create team',\n      }\n    }\n\n    // 2. Add user as head coach\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: team.id,\n        user_id: userId,\n        role: 'head_coach',\n      })\n      .select('id, role')\n      .single()\n\n    if (membershipError) {\n      console.error('Failed to add user as head coach:', membershipError)\n      // Rollback: delete the team\n      await supabaseAdmin.from('teams').delete().eq('id', team.id)\n      return {\n        success: false,\n        error: 'Failed to add user as head coach',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n      membership,\n    }\n  } catch (error) {\n    console.error('Unexpected error in createTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get User's Teams\n *\n * Fetch all teams the user belongs to\n */\nexport async function getUserTeams(userId: string): Promise<{\n  success: boolean\n  teams?: Array<{\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }>\n  error?: string\n}> {\n  try {\n    const { data: memberships, error } = await supabaseAdmin\n      .from('team_members')\n      .select(\n        `\n        role,\n        teams:team_id (\n          id,\n          name,\n          age_years,\n          level,\n          season,\n          region,\n          organization_id\n        )\n      `\n      )\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to fetch user teams:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch teams',\n      }\n    }\n\n    // Use the teams_with_age_display view for formatted age groups\n    const teamIds = memberships?.map((m: any) => m.teams.id) || []\n\n    if (teamIds.length === 0) {\n      return {\n        success: true,\n        teams: [],\n      }\n    }\n\n    const { data: teamsWithDisplay, error: displayError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .in('id', teamIds)\n\n    if (displayError) {\n      console.error('Failed to fetch teams with display:', displayError)\n      // Fallback to basic data\n      const teams =\n        memberships?.map((m: any) => ({\n          ...m.teams,\n          age_group_display: `${m.teams.age_years}`, // Fallback\n          role: m.role,\n        })) || []\n\n      return {\n        success: true,\n        teams,\n      }\n    }\n\n    // Merge role information\n    const teams = teamsWithDisplay.map((team) => {\n      const membership = memberships?.find((m: any) => m.teams.id === team.id)\n      return {\n        ...team,\n        role: membership?.role || 'member',\n      }\n    })\n\n    return {\n      success: true,\n      teams,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getUserTeams:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team by ID\n *\n * Fetch a single team by ID (with user access check)\n */\nexport async function getTeamById(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  team?: {\n    id: string\n    name: string\n    age_years: number\n    age_group_display: string\n    level: string\n    season: string\n    region: string\n    organization_id: string\n    role: string\n  }\n  error?: string\n}> {\n  try {\n    // First verify the user has access to this team\n    const { data: membership, error: membershipError } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (membershipError || !membership) {\n      return {\n        success: false,\n        error: 'Team not found or you do not have access',\n      }\n    }\n\n    // Fetch team with formatted age group\n    const { data: team, error: teamError } = await supabaseAdmin\n      .from('teams_with_age_display')\n      .select('*')\n      .eq('id', teamId)\n      .single()\n\n    if (teamError || !team) {\n      console.error('Failed to fetch team:', teamError)\n      return {\n        success: false,\n        error: 'Failed to fetch team details',\n      }\n    }\n\n    return {\n      success: true,\n      team: {\n        ...team,\n        role: membership.role,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamById:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team\n *\n * Update team details (name, level, season)\n * Note: age_years and region cannot be changed\n */\nexport async function updateTeam(\n  teamId: string,\n  input: { name?: string; level?: string; season?: string }\n): Promise<{\n  success: boolean\n  team?: any\n  error?: string\n}> {\n  try {\n    // Validate input\n    const validatedData = teamUpdateSchema.parse(input)\n\n    const { data: team, error } = await supabaseAdmin\n      .from('teams')\n      .update(validatedData)\n      .eq('id', teamId)\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to update team:', error)\n      return {\n        success: false,\n        error: 'Failed to update team',\n      }\n    }\n\n    return {\n      success: true,\n      team,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Delete Team\n *\n * Delete a team (requires head_coach role)\n */\nexport async function deleteTeam(teamId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin.from('teams').delete().eq('id', teamId)\n\n    if (error) {\n      console.error('Failed to delete team:', error)\n      return {\n        success: false,\n        error: 'Failed to delete team',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in deleteTeam:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Members\n *\n * Fetch all members of a team with their user profile info\n */\nexport async function getTeamMembers(teamId: string): Promise<{\n  success: boolean\n  members?: Array<{\n    id: string\n    user_id: string\n    role: string\n    created_at: string\n    email: string\n    full_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    // Get team members\n    const { data: members, error } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id, role, created_at')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: true })\n\n    if (error) {\n      console.error('Failed to fetch team members:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch team members',\n      }\n    }\n\n    if (!members || members.length === 0) {\n      return {\n        success: true,\n        members: [],\n      }\n    }\n\n    // Get user profiles for all members\n    const userIds = members.map((m) => m.user_id)\n    const { data: profiles, error: profilesError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email, full_name')\n      .in('id', userIds)\n\n    if (profilesError) {\n      console.error('Failed to fetch user profiles:', profilesError)\n      // Continue with members data but without profile info\n    }\n\n    // Merge member data with profile data\n    const formattedMembers = members.map((member) => {\n      const profile = profiles?.find((p) => p.id === member.user_id)\n      return {\n        id: member.id,\n        user_id: member.user_id,\n        role: member.role,\n        created_at: member.created_at,\n        email: profile?.email || '',\n        full_name: profile?.full_name || null,\n      }\n    })\n\n    return {\n      success: true,\n      members: formattedMembers,\n    }\n  } catch (error) {\n    console.error('Unexpected error in getTeamMembers:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Add Team Member\n *\n * Add a user to a team by email\n */\nexport async function addTeamMember(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  member?: any\n  error?: string\n}> {\n  try {\n    // 1. Find user by email\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, email')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (profileError) {\n      console.error('Error finding user:', profileError)\n      return {\n        success: false,\n        error: 'Error finding user',\n      }\n    }\n\n    if (!profile) {\n      return {\n        success: false,\n        error: 'No user found with this email address',\n      }\n    }\n\n    // 2. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('user_id', profile.id)\n      .maybeSingle()\n\n    if (existingMember) {\n      return {\n        success: false,\n        error: 'User is already a member of this team',\n      }\n    }\n\n    // 3. Add as team member\n    const { data: member, error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: teamId,\n        user_id: profile.id,\n        role: role,\n      })\n      .select()\n      .single()\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add team member',\n      }\n    }\n\n    return {\n      success: true,\n      member,\n    }\n  } catch (error) {\n    console.error('Unexpected error in addTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Remove Team Member\n *\n * Remove a user from a team\n */\nexport async function removeTeamMember(\n  teamId: string,\n  userId: string\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // Check if this is the last head_coach\n    const { data: headCoaches } = await supabaseAdmin\n      .from('team_members')\n      .select('id, user_id')\n      .eq('team_id', teamId)\n      .eq('role', 'head_coach')\n\n    if (headCoaches && headCoaches.length === 1 && headCoaches[0].user_id === userId) {\n      return {\n        success: false,\n        error: 'Cannot remove the last head coach. Assign another head coach first.',\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .delete()\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to remove team member:', error)\n      return {\n        success: false,\n        error: 'Failed to remove team member',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in removeTeamMember:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Update Team Member Role\n *\n * Change a team member's role\n */\nexport async function updateTeamMemberRole(\n  teamId: string,\n  userId: string,\n  newRole: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker'\n): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    // If changing FROM head_coach, check if there's another head_coach\n    const { data: currentMember } = await supabaseAdmin\n      .from('team_members')\n      .select('role')\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n      .single()\n\n    if (currentMember?.role === 'head_coach' && newRole !== 'head_coach') {\n      // Check if there are other head coaches\n      const { data: headCoaches } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('role', 'head_coach')\n\n      if (headCoaches && headCoaches.length === 1) {\n        return {\n          success: false,\n          error: 'Cannot change role. Team must have at least one head coach.',\n        }\n      }\n    }\n\n    const { error } = await supabaseAdmin\n      .from('team_members')\n      .update({ role: newRole })\n      .eq('team_id', teamId)\n      .eq('user_id', userId)\n\n    if (error) {\n      console.error('Failed to update team member role:', error)\n      return {\n        success: false,\n        error: 'Failed to update role',\n      }\n    }\n\n    return {\n      success: true,\n    }\n  } catch (error) {\n    console.error('Unexpected error in updateTeamMemberRole:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IASsB,eAAA,WAAA,GAAA,IAAA,iQAAA,EAAA,8CAAA,sPAAA,EAAA,KAAA,GAAA,4PAAA,EAAA","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/invitations.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { sendTeamInvitationEmail } from '@/lib/email/resend'\nimport crypto from 'crypto'\n\n/**\n * Create Team Invitation\n *\n * Generates an invitation with a unique token and optionally sends an email\n */\nexport async function createTeamInvitation(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker',\n  invitedBy: string,\n  sendEmail: boolean = true\n): Promise<{\n  success: boolean\n  invitation?: {\n    id: string\n    token: string\n    inviteLink: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // 0. Validate email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (!emailRegex.test(email)) {\n      return {\n        success: false,\n        error: 'Invalid email address format. Please provide a valid email (e.g., user@example.com)',\n      }\n    }\n\n    // 1. Check if inviting user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', invitedBy)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before inviting team members',\n        requiresVerification: true,\n      }\n    }\n\n    // 2. Check if user is already a member\n    const { data: existingProfile } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (existingProfile) {\n      const { data: existingMember } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('user_id', existingProfile.id)\n        .maybeSingle()\n\n      if (existingMember) {\n        return {\n          success: false,\n          error: 'User is already a member of this team',\n        }\n      }\n    }\n\n    // 3. Check for pending invitation\n    const { data: pendingInvite } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('email', email)\n      .eq('status', 'pending')\n      .maybeSingle()\n\n    if (pendingInvite) {\n      return {\n        success: false,\n        error: 'An invitation is already pending for this email',\n      }\n    }\n\n    // 4. Generate secure token\n    const token = crypto.randomBytes(32).toString('hex')\n\n    // 5. Create invitation\n    const { data: invitation, error: inviteError } = await supabaseAdmin\n      .from('team_invitations')\n      .insert({\n        team_id: teamId,\n        email: email.toLowerCase(),\n        role,\n        token,\n        invited_by: invitedBy,\n      })\n      .select('id, token')\n      .single()\n\n    if (inviteError || !invitation) {\n      console.error('Failed to create invitation:', inviteError)\n      return {\n        success: false,\n        error: 'Failed to create invitation',\n      }\n    }\n\n    // 6. Generate invite link\n    const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'\n    const inviteLink = `${baseUrl}/invite/${invitation.token}`\n\n    // 7. Send email if requested\n    if (sendEmail) {\n      // Get team and inviter info\n      const { data: team } = await supabaseAdmin\n        .from('teams')\n        .select('name')\n        .eq('id', teamId)\n        .single()\n\n      const { data: inviter } = await supabaseAdmin\n        .from('user_profiles')\n        .select('full_name, email')\n        .eq('id', invitedBy)\n        .single()\n\n      if (team && inviter) {\n        await sendTeamInvitationEmail(email, {\n          inviteeName: email.split('@')[0], // Use email username if name unknown\n          inviterName: inviter.full_name || inviter.email,\n          teamName: team.name,\n          role: role.replace('_', ' '),\n          inviteLink,\n        })\n      }\n    }\n\n    return {\n      success: true,\n      invitation: {\n        id: invitation.id,\n        token: invitation.token,\n        inviteLink,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error creating invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get My Invitations\n *\n * Fetch all pending invitations for a user's email\n */\nexport async function getMyInvitations(email: string): Promise<{\n  success: boolean\n  invitations?: Array<{\n    id: string\n    team_id: string\n    team_name: string\n    token: string\n    email: string\n    role: string\n    status: string\n    created_at: string\n    expires_at: string\n    invited_by_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    const { data: invitations, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, team_id, token, email, role, status, created_at, expires_at, invited_by')\n      .eq('email', email.toLowerCase())\n      .eq('status', 'pending')\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch my invitations:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitations',\n      }\n    }\n\n    if (!invitations || invitations.length === 0) {\n      return {\n        success: true,\n        invitations: [],\n      }\n    }\n\n    // Get team names\n    const teamIds = invitations.map((inv) => inv.team_id)\n    const { data: teams } = await supabaseAdmin\n      .from('teams')\n      .select('id, name')\n      .in('id', teamIds)\n\n    // Get inviter names\n    const inviterIds = invitations.map((inv) => inv.invited_by)\n    const { data: inviters } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, full_name, email')\n      .in('id', inviterIds)\n\n    const formattedInvitations = invitations.map((inv) => {\n      const team = teams?.find((t) => t.id === inv.team_id)\n      const inviter = inviters?.find((i) => i.id === inv.invited_by)\n      return {\n        id: inv.id,\n        team_id: inv.team_id,\n        team_name: team?.name || 'Unknown Team',\n        token: inv.token,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        created_at: inv.created_at,\n        expires_at: inv.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      }\n    })\n\n    return {\n      success: true,\n      invitations: formattedInvitations,\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching my invitations:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Invitations\n *\n * Fetch all invitations for a team\n */\nexport async function getTeamInvitations(teamId: string): Promise<{\n  success: boolean\n  invitations?: Array<{\n    id: string\n    email: string\n    role: string\n    status: string\n    created_at: string\n    expires_at: string\n    invited_by_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    const { data: invitations, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, email, role, status, created_at, expires_at, invited_by')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch invitations:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitations',\n      }\n    }\n\n    if (!invitations || invitations.length === 0) {\n      return {\n        success: true,\n        invitations: [],\n      }\n    }\n\n    // Get inviter names\n    const inviterIds = invitations.map((inv) => inv.invited_by)\n    const { data: inviters } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, full_name, email')\n      .in('id', inviterIds)\n\n    const formattedInvitations = invitations.map((inv) => {\n      const inviter = inviters?.find((i) => i.id === inv.invited_by)\n      return {\n        id: inv.id,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        created_at: inv.created_at,\n        expires_at: inv.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      }\n    })\n\n    return {\n      success: true,\n      invitations: formattedInvitations,\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching invitations:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Revoke Team Invitation\n *\n * Cancel a pending invitation\n */\nexport async function revokeTeamInvitation(invitationId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin\n      .from('team_invitations')\n      .update({ status: 'revoked' })\n      .eq('id', invitationId)\n\n    if (error) {\n      console.error('Failed to revoke invitation:', error)\n      return {\n        success: false,\n        error: 'Failed to revoke invitation',\n      }\n    }\n\n    return { success: true }\n  } catch (error) {\n    console.error('Unexpected error revoking invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Invitation by Token\n *\n * Fetch invitation details for acceptance\n */\nexport async function getInvitationByToken(token: string): Promise<{\n  success: boolean\n  invitation?: {\n    id: string\n    team_id: string\n    team_name: string\n    email: string\n    role: string\n    status: string\n    expires_at: string\n    invited_by_name: string | null\n  }\n  error?: string\n}> {\n  try {\n    const { data: invitation, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, team_id, email, role, status, expires_at, invited_by')\n      .eq('token', token)\n      .maybeSingle()\n\n    if (error) {\n      console.error('Failed to fetch invitation:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitation',\n      }\n    }\n\n    if (!invitation) {\n      return {\n        success: false,\n        error: 'Invitation not found',\n      }\n    }\n\n    // Check if expired\n    if (new Date(invitation.expires_at) < new Date()) {\n      return {\n        success: false,\n        error: 'This invitation has expired',\n      }\n    }\n\n    // Check if already accepted or revoked\n    if (invitation.status !== 'pending') {\n      return {\n        success: false,\n        error: `This invitation has been ${invitation.status}`,\n      }\n    }\n\n    // Get team name and inviter name\n    const { data: team } = await supabaseAdmin\n      .from('teams')\n      .select('name')\n      .eq('id', invitation.team_id)\n      .single()\n\n    const { data: inviter } = await supabaseAdmin\n      .from('user_profiles')\n      .select('full_name, email')\n      .eq('id', invitation.invited_by)\n      .maybeSingle()\n\n    return {\n      success: true,\n      invitation: {\n        id: invitation.id,\n        team_id: invitation.team_id,\n        team_name: team?.name || 'Unknown Team',\n        email: invitation.email,\n        role: invitation.role,\n        status: invitation.status,\n        expires_at: invitation.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Accept Team Invitation\n *\n * Accept invitation and add user to team\n */\nexport async function acceptTeamInvitation(\n  token: string,\n  userId: string\n): Promise<{\n  success: boolean\n  teamId?: string\n  error?: string\n}> {\n  try {\n    // 1. Get and validate invitation\n    const inviteResult = await getInvitationByToken(token)\n    if (!inviteResult.success || !inviteResult.invitation) {\n      return {\n        success: false,\n        error: inviteResult.error || 'Invalid invitation',\n      }\n    }\n\n    const invitation = inviteResult.invitation\n\n    // 2. Get user email\n    const { data: userProfile } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email')\n      .eq('id', userId)\n      .single()\n\n    if (!userProfile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    // 3. Verify email matches (case-insensitive)\n    if (userProfile.email.toLowerCase() !== invitation.email.toLowerCase()) {\n      return {\n        success: false,\n        error: 'This invitation was sent to a different email address',\n      }\n    }\n\n    // 4. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', invitation.team_id)\n      .eq('user_id', userId)\n      .maybeSingle()\n\n    if (existingMember) {\n      // Mark as accepted anyway\n      await supabaseAdmin\n        .from('team_invitations')\n        .update({ status: 'accepted', accepted_at: new Date().toISOString() })\n        .eq('id', invitation.id)\n\n      return {\n        success: true,\n        teamId: invitation.team_id,\n      }\n    }\n\n    // 5. Add user to team\n    const { error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: invitation.team_id,\n        user_id: userId,\n        role: invitation.role as any,\n      })\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add you to the team',\n      }\n    }\n\n    // 6. Mark invitation as accepted\n    await supabaseAdmin\n      .from('team_invitations')\n      .update({ status: 'accepted', accepted_at: new Date().toISOString() })\n      .eq('id', invitation.id)\n\n    return {\n      success: true,\n      teamId: invitation.team_id,\n    }\n  } catch (error) {\n    console.error('Unexpected error accepting invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA8KsB,mBAAA,WAAA,GAAA,IAAA,iQAAA,EAAA,8CAAA,sPAAA,EAAA,KAAA,GAAA,4PAAA,EAAA","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/invitations.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { sendTeamInvitationEmail } from '@/lib/email/resend'\nimport crypto from 'crypto'\n\n/**\n * Create Team Invitation\n *\n * Generates an invitation with a unique token and optionally sends an email\n */\nexport async function createTeamInvitation(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker',\n  invitedBy: string,\n  sendEmail: boolean = true\n): Promise<{\n  success: boolean\n  invitation?: {\n    id: string\n    token: string\n    inviteLink: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // 0. Validate email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (!emailRegex.test(email)) {\n      return {\n        success: false,\n        error: 'Invalid email address format. Please provide a valid email (e.g., user@example.com)',\n      }\n    }\n\n    // 1. Check if inviting user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', invitedBy)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before inviting team members',\n        requiresVerification: true,\n      }\n    }\n\n    // 2. Check if user is already a member\n    const { data: existingProfile } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (existingProfile) {\n      const { data: existingMember } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('user_id', existingProfile.id)\n        .maybeSingle()\n\n      if (existingMember) {\n        return {\n          success: false,\n          error: 'User is already a member of this team',\n        }\n      }\n    }\n\n    // 3. Check for pending invitation\n    const { data: pendingInvite } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('email', email)\n      .eq('status', 'pending')\n      .maybeSingle()\n\n    if (pendingInvite) {\n      return {\n        success: false,\n        error: 'An invitation is already pending for this email',\n      }\n    }\n\n    // 4. Generate secure token\n    const token = crypto.randomBytes(32).toString('hex')\n\n    // 5. Create invitation\n    const { data: invitation, error: inviteError } = await supabaseAdmin\n      .from('team_invitations')\n      .insert({\n        team_id: teamId,\n        email: email.toLowerCase(),\n        role,\n        token,\n        invited_by: invitedBy,\n      })\n      .select('id, token')\n      .single()\n\n    if (inviteError || !invitation) {\n      console.error('Failed to create invitation:', inviteError)\n      return {\n        success: false,\n        error: 'Failed to create invitation',\n      }\n    }\n\n    // 6. Generate invite link\n    const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'\n    const inviteLink = `${baseUrl}/invite/${invitation.token}`\n\n    // 7. Send email if requested\n    if (sendEmail) {\n      // Get team and inviter info\n      const { data: team } = await supabaseAdmin\n        .from('teams')\n        .select('name')\n        .eq('id', teamId)\n        .single()\n\n      const { data: inviter } = await supabaseAdmin\n        .from('user_profiles')\n        .select('full_name, email')\n        .eq('id', invitedBy)\n        .single()\n\n      if (team && inviter) {\n        await sendTeamInvitationEmail(email, {\n          inviteeName: email.split('@')[0], // Use email username if name unknown\n          inviterName: inviter.full_name || inviter.email,\n          teamName: team.name,\n          role: role.replace('_', ' '),\n          inviteLink,\n        })\n      }\n    }\n\n    return {\n      success: true,\n      invitation: {\n        id: invitation.id,\n        token: invitation.token,\n        inviteLink,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error creating invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get My Invitations\n *\n * Fetch all pending invitations for a user's email\n */\nexport async function getMyInvitations(email: string): Promise<{\n  success: boolean\n  invitations?: Array<{\n    id: string\n    team_id: string\n    team_name: string\n    token: string\n    email: string\n    role: string\n    status: string\n    created_at: string\n    expires_at: string\n    invited_by_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    const { data: invitations, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, team_id, token, email, role, status, created_at, expires_at, invited_by')\n      .eq('email', email.toLowerCase())\n      .eq('status', 'pending')\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch my invitations:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitations',\n      }\n    }\n\n    if (!invitations || invitations.length === 0) {\n      return {\n        success: true,\n        invitations: [],\n      }\n    }\n\n    // Get team names\n    const teamIds = invitations.map((inv) => inv.team_id)\n    const { data: teams } = await supabaseAdmin\n      .from('teams')\n      .select('id, name')\n      .in('id', teamIds)\n\n    // Get inviter names\n    const inviterIds = invitations.map((inv) => inv.invited_by)\n    const { data: inviters } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, full_name, email')\n      .in('id', inviterIds)\n\n    const formattedInvitations = invitations.map((inv) => {\n      const team = teams?.find((t) => t.id === inv.team_id)\n      const inviter = inviters?.find((i) => i.id === inv.invited_by)\n      return {\n        id: inv.id,\n        team_id: inv.team_id,\n        team_name: team?.name || 'Unknown Team',\n        token: inv.token,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        created_at: inv.created_at,\n        expires_at: inv.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      }\n    })\n\n    return {\n      success: true,\n      invitations: formattedInvitations,\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching my invitations:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Invitations\n *\n * Fetch all invitations for a team\n */\nexport async function getTeamInvitations(teamId: string): Promise<{\n  success: boolean\n  invitations?: Array<{\n    id: string\n    email: string\n    role: string\n    status: string\n    created_at: string\n    expires_at: string\n    invited_by_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    const { data: invitations, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, email, role, status, created_at, expires_at, invited_by')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch invitations:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitations',\n      }\n    }\n\n    if (!invitations || invitations.length === 0) {\n      return {\n        success: true,\n        invitations: [],\n      }\n    }\n\n    // Get inviter names\n    const inviterIds = invitations.map((inv) => inv.invited_by)\n    const { data: inviters } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, full_name, email')\n      .in('id', inviterIds)\n\n    const formattedInvitations = invitations.map((inv) => {\n      const inviter = inviters?.find((i) => i.id === inv.invited_by)\n      return {\n        id: inv.id,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        created_at: inv.created_at,\n        expires_at: inv.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      }\n    })\n\n    return {\n      success: true,\n      invitations: formattedInvitations,\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching invitations:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Revoke Team Invitation\n *\n * Cancel a pending invitation\n */\nexport async function revokeTeamInvitation(invitationId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin\n      .from('team_invitations')\n      .update({ status: 'revoked' })\n      .eq('id', invitationId)\n\n    if (error) {\n      console.error('Failed to revoke invitation:', error)\n      return {\n        success: false,\n        error: 'Failed to revoke invitation',\n      }\n    }\n\n    return { success: true }\n  } catch (error) {\n    console.error('Unexpected error revoking invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Invitation by Token\n *\n * Fetch invitation details for acceptance\n */\nexport async function getInvitationByToken(token: string): Promise<{\n  success: boolean\n  invitation?: {\n    id: string\n    team_id: string\n    team_name: string\n    email: string\n    role: string\n    status: string\n    expires_at: string\n    invited_by_name: string | null\n  }\n  error?: string\n}> {\n  try {\n    const { data: invitation, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, team_id, email, role, status, expires_at, invited_by')\n      .eq('token', token)\n      .maybeSingle()\n\n    if (error) {\n      console.error('Failed to fetch invitation:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitation',\n      }\n    }\n\n    if (!invitation) {\n      return {\n        success: false,\n        error: 'Invitation not found',\n      }\n    }\n\n    // Check if expired\n    if (new Date(invitation.expires_at) < new Date()) {\n      return {\n        success: false,\n        error: 'This invitation has expired',\n      }\n    }\n\n    // Check if already accepted or revoked\n    if (invitation.status !== 'pending') {\n      return {\n        success: false,\n        error: `This invitation has been ${invitation.status}`,\n      }\n    }\n\n    // Get team name and inviter name\n    const { data: team } = await supabaseAdmin\n      .from('teams')\n      .select('name')\n      .eq('id', invitation.team_id)\n      .single()\n\n    const { data: inviter } = await supabaseAdmin\n      .from('user_profiles')\n      .select('full_name, email')\n      .eq('id', invitation.invited_by)\n      .maybeSingle()\n\n    return {\n      success: true,\n      invitation: {\n        id: invitation.id,\n        team_id: invitation.team_id,\n        team_name: team?.name || 'Unknown Team',\n        email: invitation.email,\n        role: invitation.role,\n        status: invitation.status,\n        expires_at: invitation.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Accept Team Invitation\n *\n * Accept invitation and add user to team\n */\nexport async function acceptTeamInvitation(\n  token: string,\n  userId: string\n): Promise<{\n  success: boolean\n  teamId?: string\n  error?: string\n}> {\n  try {\n    // 1. Get and validate invitation\n    const inviteResult = await getInvitationByToken(token)\n    if (!inviteResult.success || !inviteResult.invitation) {\n      return {\n        success: false,\n        error: inviteResult.error || 'Invalid invitation',\n      }\n    }\n\n    const invitation = inviteResult.invitation\n\n    // 2. Get user email\n    const { data: userProfile } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email')\n      .eq('id', userId)\n      .single()\n\n    if (!userProfile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    // 3. Verify email matches (case-insensitive)\n    if (userProfile.email.toLowerCase() !== invitation.email.toLowerCase()) {\n      return {\n        success: false,\n        error: 'This invitation was sent to a different email address',\n      }\n    }\n\n    // 4. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', invitation.team_id)\n      .eq('user_id', userId)\n      .maybeSingle()\n\n    if (existingMember) {\n      // Mark as accepted anyway\n      await supabaseAdmin\n        .from('team_invitations')\n        .update({ status: 'accepted', accepted_at: new Date().toISOString() })\n        .eq('id', invitation.id)\n\n      return {\n        success: true,\n        teamId: invitation.team_id,\n      }\n    }\n\n    // 5. Add user to team\n    const { error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: invitation.team_id,\n        user_id: userId,\n        role: invitation.role as any,\n      })\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add you to the team',\n      }\n    }\n\n    // 6. Mark invitation as accepted\n    await supabaseAdmin\n      .from('team_invitations')\n      .update({ status: 'accepted', accepted_at: new Date().toISOString() })\n      .eq('id', invitation.id)\n\n    return {\n      success: true,\n      teamId: invitation.team_id,\n    }\n  } catch (error) {\n    console.error('Unexpected error accepting invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA4csB,uBAAA,WAAA,GAAA,IAAA,iQAAA,EAAA,8CAAA,sPAAA,EAAA,KAAA,GAAA,4PAAA,EAAA","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/actions/invitations.ts"],"sourcesContent":["'use server'\n\nimport { supabaseAdmin } from '@/lib/db/supabase-admin'\nimport { sendTeamInvitationEmail } from '@/lib/email/resend'\nimport crypto from 'crypto'\n\n/**\n * Create Team Invitation\n *\n * Generates an invitation with a unique token and optionally sends an email\n */\nexport async function createTeamInvitation(\n  teamId: string,\n  email: string,\n  role: 'head_coach' | 'assistant_coach' | 'manager' | 'stat_tracker',\n  invitedBy: string,\n  sendEmail: boolean = true\n): Promise<{\n  success: boolean\n  invitation?: {\n    id: string\n    token: string\n    inviteLink: string\n  }\n  error?: string\n  requiresVerification?: boolean\n}> {\n  try {\n    // 0. Validate email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (!emailRegex.test(email)) {\n      return {\n        success: false,\n        error: 'Invalid email address format. Please provide a valid email (e.g., user@example.com)',\n      }\n    }\n\n    // 1. Check if inviting user's email is verified (using our custom field)\n    const { data: profile, error: profileError } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email_verified')\n      .eq('id', invitedBy)\n      .single()\n\n    if (profileError || !profile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    if (!profile.email_verified) {\n      return {\n        success: false,\n        error: 'Please verify your email address before inviting team members',\n        requiresVerification: true,\n      }\n    }\n\n    // 2. Check if user is already a member\n    const { data: existingProfile } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id')\n      .eq('email', email)\n      .maybeSingle()\n\n    if (existingProfile) {\n      const { data: existingMember } = await supabaseAdmin\n        .from('team_members')\n        .select('id')\n        .eq('team_id', teamId)\n        .eq('user_id', existingProfile.id)\n        .maybeSingle()\n\n      if (existingMember) {\n        return {\n          success: false,\n          error: 'User is already a member of this team',\n        }\n      }\n    }\n\n    // 3. Check for pending invitation\n    const { data: pendingInvite } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id')\n      .eq('team_id', teamId)\n      .eq('email', email)\n      .eq('status', 'pending')\n      .maybeSingle()\n\n    if (pendingInvite) {\n      return {\n        success: false,\n        error: 'An invitation is already pending for this email',\n      }\n    }\n\n    // 4. Generate secure token\n    const token = crypto.randomBytes(32).toString('hex')\n\n    // 5. Create invitation\n    const { data: invitation, error: inviteError } = await supabaseAdmin\n      .from('team_invitations')\n      .insert({\n        team_id: teamId,\n        email: email.toLowerCase(),\n        role,\n        token,\n        invited_by: invitedBy,\n      })\n      .select('id, token')\n      .single()\n\n    if (inviteError || !invitation) {\n      console.error('Failed to create invitation:', inviteError)\n      return {\n        success: false,\n        error: 'Failed to create invitation',\n      }\n    }\n\n    // 6. Generate invite link\n    const baseUrl = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000'\n    const inviteLink = `${baseUrl}/invite/${invitation.token}`\n\n    // 7. Send email if requested\n    if (sendEmail) {\n      // Get team and inviter info\n      const { data: team } = await supabaseAdmin\n        .from('teams')\n        .select('name')\n        .eq('id', teamId)\n        .single()\n\n      const { data: inviter } = await supabaseAdmin\n        .from('user_profiles')\n        .select('full_name, email')\n        .eq('id', invitedBy)\n        .single()\n\n      if (team && inviter) {\n        await sendTeamInvitationEmail(email, {\n          inviteeName: email.split('@')[0], // Use email username if name unknown\n          inviterName: inviter.full_name || inviter.email,\n          teamName: team.name,\n          role: role.replace('_', ' '),\n          inviteLink,\n        })\n      }\n    }\n\n    return {\n      success: true,\n      invitation: {\n        id: invitation.id,\n        token: invitation.token,\n        inviteLink,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error creating invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get My Invitations\n *\n * Fetch all pending invitations for a user's email\n */\nexport async function getMyInvitations(email: string): Promise<{\n  success: boolean\n  invitations?: Array<{\n    id: string\n    team_id: string\n    team_name: string\n    token: string\n    email: string\n    role: string\n    status: string\n    created_at: string\n    expires_at: string\n    invited_by_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    const { data: invitations, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, team_id, token, email, role, status, created_at, expires_at, invited_by')\n      .eq('email', email.toLowerCase())\n      .eq('status', 'pending')\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch my invitations:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitations',\n      }\n    }\n\n    if (!invitations || invitations.length === 0) {\n      return {\n        success: true,\n        invitations: [],\n      }\n    }\n\n    // Get team names\n    const teamIds = invitations.map((inv) => inv.team_id)\n    const { data: teams } = await supabaseAdmin\n      .from('teams')\n      .select('id, name')\n      .in('id', teamIds)\n\n    // Get inviter names\n    const inviterIds = invitations.map((inv) => inv.invited_by)\n    const { data: inviters } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, full_name, email')\n      .in('id', inviterIds)\n\n    const formattedInvitations = invitations.map((inv) => {\n      const team = teams?.find((t) => t.id === inv.team_id)\n      const inviter = inviters?.find((i) => i.id === inv.invited_by)\n      return {\n        id: inv.id,\n        team_id: inv.team_id,\n        team_name: team?.name || 'Unknown Team',\n        token: inv.token,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        created_at: inv.created_at,\n        expires_at: inv.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      }\n    })\n\n    return {\n      success: true,\n      invitations: formattedInvitations,\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching my invitations:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Team Invitations\n *\n * Fetch all invitations for a team\n */\nexport async function getTeamInvitations(teamId: string): Promise<{\n  success: boolean\n  invitations?: Array<{\n    id: string\n    email: string\n    role: string\n    status: string\n    created_at: string\n    expires_at: string\n    invited_by_name: string | null\n  }>\n  error?: string\n}> {\n  try {\n    const { data: invitations, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, email, role, status, created_at, expires_at, invited_by')\n      .eq('team_id', teamId)\n      .order('created_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch invitations:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitations',\n      }\n    }\n\n    if (!invitations || invitations.length === 0) {\n      return {\n        success: true,\n        invitations: [],\n      }\n    }\n\n    // Get inviter names\n    const inviterIds = invitations.map((inv) => inv.invited_by)\n    const { data: inviters } = await supabaseAdmin\n      .from('user_profiles')\n      .select('id, full_name, email')\n      .in('id', inviterIds)\n\n    const formattedInvitations = invitations.map((inv) => {\n      const inviter = inviters?.find((i) => i.id === inv.invited_by)\n      return {\n        id: inv.id,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        created_at: inv.created_at,\n        expires_at: inv.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      }\n    })\n\n    return {\n      success: true,\n      invitations: formattedInvitations,\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching invitations:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Revoke Team Invitation\n *\n * Cancel a pending invitation\n */\nexport async function revokeTeamInvitation(invitationId: string): Promise<{\n  success: boolean\n  error?: string\n}> {\n  try {\n    const { error } = await supabaseAdmin\n      .from('team_invitations')\n      .update({ status: 'revoked' })\n      .eq('id', invitationId)\n\n    if (error) {\n      console.error('Failed to revoke invitation:', error)\n      return {\n        success: false,\n        error: 'Failed to revoke invitation',\n      }\n    }\n\n    return { success: true }\n  } catch (error) {\n    console.error('Unexpected error revoking invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Get Invitation by Token\n *\n * Fetch invitation details for acceptance\n */\nexport async function getInvitationByToken(token: string): Promise<{\n  success: boolean\n  invitation?: {\n    id: string\n    team_id: string\n    team_name: string\n    email: string\n    role: string\n    status: string\n    expires_at: string\n    invited_by_name: string | null\n  }\n  error?: string\n}> {\n  try {\n    const { data: invitation, error } = await supabaseAdmin\n      .from('team_invitations')\n      .select('id, team_id, email, role, status, expires_at, invited_by')\n      .eq('token', token)\n      .maybeSingle()\n\n    if (error) {\n      console.error('Failed to fetch invitation:', error)\n      return {\n        success: false,\n        error: 'Failed to fetch invitation',\n      }\n    }\n\n    if (!invitation) {\n      return {\n        success: false,\n        error: 'Invitation not found',\n      }\n    }\n\n    // Check if expired\n    if (new Date(invitation.expires_at) < new Date()) {\n      return {\n        success: false,\n        error: 'This invitation has expired',\n      }\n    }\n\n    // Check if already accepted or revoked\n    if (invitation.status !== 'pending') {\n      return {\n        success: false,\n        error: `This invitation has been ${invitation.status}`,\n      }\n    }\n\n    // Get team name and inviter name\n    const { data: team } = await supabaseAdmin\n      .from('teams')\n      .select('name')\n      .eq('id', invitation.team_id)\n      .single()\n\n    const { data: inviter } = await supabaseAdmin\n      .from('user_profiles')\n      .select('full_name, email')\n      .eq('id', invitation.invited_by)\n      .maybeSingle()\n\n    return {\n      success: true,\n      invitation: {\n        id: invitation.id,\n        team_id: invitation.team_id,\n        team_name: team?.name || 'Unknown Team',\n        email: invitation.email,\n        role: invitation.role,\n        status: invitation.status,\n        expires_at: invitation.expires_at,\n        invited_by_name: inviter?.full_name || inviter?.email || null,\n      },\n    }\n  } catch (error) {\n    console.error('Unexpected error fetching invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n\n/**\n * Accept Team Invitation\n *\n * Accept invitation and add user to team\n */\nexport async function acceptTeamInvitation(\n  token: string,\n  userId: string\n): Promise<{\n  success: boolean\n  teamId?: string\n  error?: string\n}> {\n  try {\n    // 1. Get and validate invitation\n    const inviteResult = await getInvitationByToken(token)\n    if (!inviteResult.success || !inviteResult.invitation) {\n      return {\n        success: false,\n        error: inviteResult.error || 'Invalid invitation',\n      }\n    }\n\n    const invitation = inviteResult.invitation\n\n    // 2. Get user email\n    const { data: userProfile } = await supabaseAdmin\n      .from('user_profiles')\n      .select('email')\n      .eq('id', userId)\n      .single()\n\n    if (!userProfile) {\n      return {\n        success: false,\n        error: 'User profile not found',\n      }\n    }\n\n    // 3. Verify email matches (case-insensitive)\n    if (userProfile.email.toLowerCase() !== invitation.email.toLowerCase()) {\n      return {\n        success: false,\n        error: 'This invitation was sent to a different email address',\n      }\n    }\n\n    // 4. Check if already a member\n    const { data: existingMember } = await supabaseAdmin\n      .from('team_members')\n      .select('id')\n      .eq('team_id', invitation.team_id)\n      .eq('user_id', userId)\n      .maybeSingle()\n\n    if (existingMember) {\n      // Mark as accepted anyway\n      await supabaseAdmin\n        .from('team_invitations')\n        .update({ status: 'accepted', accepted_at: new Date().toISOString() })\n        .eq('id', invitation.id)\n\n      return {\n        success: true,\n        teamId: invitation.team_id,\n      }\n    }\n\n    // 5. Add user to team\n    const { error: memberError } = await supabaseAdmin\n      .from('team_members')\n      .insert({\n        team_id: invitation.team_id,\n        user_id: userId,\n        role: invitation.role as any,\n      })\n\n    if (memberError) {\n      console.error('Failed to add team member:', memberError)\n      return {\n        success: false,\n        error: 'Failed to add you to the team',\n      }\n    }\n\n    // 6. Mark invitation as accepted\n    await supabaseAdmin\n      .from('team_invitations')\n      .update({ status: 'accepted', accepted_at: new Date().toISOString() })\n      .eq('id', invitation.id)\n\n    return {\n      success: true,\n      teamId: invitation.team_id,\n    }\n  } catch (error) {\n    console.error('Unexpected error accepting invitation:', error)\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA+UsB,uBAAA,WAAA,GAAA,IAAA,iQAAA,EAAA,8CAAA,sPAAA,EAAA,KAAA,GAAA,4PAAA,EAAA","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/brockarnold/code/hp2/packages/web/app/demo/teams/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabase } from '@/lib/db/supabase'\nimport { getUserTeams, getTeamStats } from '@/app/actions/teams'\nimport { getMyInvitations, acceptTeamInvitation, revokeTeamInvitation } from '@/app/actions/invitations'\nimport { useTeam } from '@/lib/contexts/team-context'\n\ninterface TeamWithStats {\n  id: string\n  name: string\n  age_group_display: string\n  level: string\n  season: string\n  region: string\n  role: string\n  playerCount?: number\n  gameCount?: number\n}\n\ninterface PendingInvitation {\n  id: string\n  team_id: string\n  team_name: string\n  token: string\n  email: string\n  role: string\n  status: string\n  created_at: string\n  expires_at: string\n  invited_by_name: string | null\n}\n\nexport default function TeamsPage() {\n  const router = useRouter()\n  const { selectTeam } = useTeam()\n  const [teams, setTeams] = useState<TeamWithStats[]>([])\n  const [pendingInvitations, setPendingInvitations] = useState<PendingInvitation[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [successMessage, setSuccessMessage] = useState<string | null>(null)\n  const [isProcessingInvite, setIsProcessingInvite] = useState(false)\n\n  useEffect(() => {\n    const loadTeams = async () => {\n      try {\n        // Get current user\n        const {\n          data: { user },\n          error: userError,\n        } = await supabase.auth.getUser()\n\n        if (userError || !user) {\n          console.log('Auth error, clearing session:', userError)\n          await supabase.auth.signOut()\n          // Redirect to sign-in page\n          router.push('/auth/signin?returnUrl=/demo/teams')\n          return\n        }\n\n        // Get user profile for email\n        const { data: profile } = await supabase\n          .from('user_profiles')\n          .select('email')\n          .eq('id', user.id)\n          .single()\n\n        const result = await getUserTeams(user.id)\n\n        if (result.success && result.teams) {\n          // Load stats for each team\n          const teamsWithStats = await Promise.all(\n            result.teams.map(async (team) => {\n              const stats = await getTeamStats(team.id)\n              return {\n                ...team,\n                playerCount: stats.playerCount,\n                gameCount: stats.gameCount,\n              }\n            })\n          )\n          setTeams(teamsWithStats)\n        } else {\n          // Empty teams list is OK, don't show error\n          if (result.teams && result.teams.length === 0) {\n            setTeams([])\n          } else {\n            setError(result.error || 'Failed to load teams')\n          }\n        }\n\n        // Get pending invitations\n        if (profile?.email) {\n          const invitationsResult = await getMyInvitations(profile.email)\n          if (invitationsResult.success && invitationsResult.invitations) {\n            setPendingInvitations(invitationsResult.invitations)\n          }\n        }\n      } catch (err) {\n        console.error('Error loading teams:', err)\n        setError('An unexpected error occurred')\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    loadTeams()\n  }, [])\n\n  async function handleAcceptInvitation(invitationId: string, token: string) {\n    setIsProcessingInvite(true)\n    setError(null)\n    setSuccessMessage(null)\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) {\n        setError('You must be signed in to accept invitations')\n        setIsProcessingInvite(false)\n        return\n      }\n\n      const result = await acceptTeamInvitation(token, user.id)\n\n      if (result.success) {\n        setSuccessMessage('Invitation accepted! Reloading teams...')\n        // Reload teams and invitations\n        window.location.reload()\n      } else {\n        setError(result.error || 'Failed to accept invitation')\n      }\n    } catch (err) {\n      console.error('Error accepting invitation:', err)\n      setError('An unexpected error occurred')\n    } finally {\n      setIsProcessingInvite(false)\n    }\n  }\n\n  async function handleDeclineInvitation(invitationId: string, teamName: string) {\n    if (!confirm(`Decline invitation to join ${teamName}?`)) {\n      return\n    }\n\n    setIsProcessingInvite(true)\n    setError(null)\n    setSuccessMessage(null)\n\n    try {\n      const result = await revokeTeamInvitation(invitationId)\n\n      if (result.success) {\n        setSuccessMessage('Invitation declined')\n        // Remove from list\n        setPendingInvitations(pendingInvitations.filter(inv => inv.id !== invitationId))\n      } else {\n        setError(result.error || 'Failed to decline invitation')\n      }\n    } catch (err) {\n      console.error('Error declining invitation:', err)\n      setError('An unexpected error occurred')\n    } finally {\n      setIsProcessingInvite(false)\n    }\n  }\n\n  function formatRole(role: string) {\n    return role.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading teams...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-6xl mx-auto px-4\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">My Teams</h1>\n            <p className=\"mt-2 text-gray-600\">\n              Manage your hockey teams and rosters\n            </p>\n          </div>\n          <button\n            onClick={() => router.push('/demo/teams/new')}\n            className=\"bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 transition-colors\"\n          >\n            + Create Team\n          </button>\n        </div>\n\n        {/* Success Alert */}\n        {successMessage && (\n          <div className=\"mb-6 bg-green-50 border border-green-200 rounded-lg p-4\">\n            <p className=\"text-green-700\">{successMessage}</p>\n          </div>\n        )}\n\n        {/* Error Alert */}\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-700\">{error}</p>\n          </div>\n        )}\n\n        {/* Pending Invitations Section */}\n        {pendingInvitations.length > 0 && (\n          <div className=\"mb-8\">\n            <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n              <div className=\"px-6 py-4 border-b border-gray-200 bg-amber-50\">\n                <div className=\"flex items-center justify-between\">\n                  <h2 className=\"text-lg font-semibold text-gray-900\">\n                    Pending Invitations ({pendingInvitations.length})\n                  </h2>\n                  <span className=\"text-sm text-gray-600\">You've been invited to join these teams</span>\n                </div>\n              </div>\n              <div className=\"divide-y divide-gray-200\">\n                {pendingInvitations.map((invitation) => (\n                  <div key={invitation.id} className=\"px-6 py-4 hover:bg-gray-50\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center\">\n                            <svg className=\"w-6 h-6 text-amber-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                            </svg>\n                          </div>\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <h3 className=\"font-semibold text-gray-900\">{invitation.team_name}</h3>\n                              <span className=\"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800\">\n                                {formatRole(invitation.role)}\n                              </span>\n                            </div>\n                            <p className=\"text-sm text-gray-600\">\n                              Invited by {invitation.invited_by_name || 'Unknown'} \n                              Expires {new Date(invitation.expires_at).toLocaleDateString()}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center gap-2 ml-4\">\n                        <button\n                          onClick={() => handleAcceptInvitation(invitation.id, invitation.token)}\n                          disabled={isProcessingInvite}\n                          className=\"bg-green-600 text-white px-4 py-2 rounded-md font-medium hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm\"\n                        >\n                          Accept\n                        </button>\n                        <button\n                          onClick={() => handleDeclineInvitation(invitation.id, invitation.team_name)}\n                          disabled={isProcessingInvite}\n                          className=\"bg-white text-gray-700 px-4 py-2 rounded-md font-medium border border-gray-300 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors text-sm\"\n                        >\n                          Decline\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Teams Grid */}\n        {teams.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n            {/* Hero Section */}\n            <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-center text-white\">\n              <svg\n                className=\"mx-auto h-16 w-16 mb-4 opacity-90\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"\n                />\n              </svg>\n              <h3 className=\"text-2xl font-bold mb-2\">Welcome to Team Management!</h3>\n              <p className=\"text-blue-100 max-w-2xl mx-auto\">\n                Teams are the foundation of your coaching experience. Create a team to start tracking games, managing rosters, and generating AI-powered practice plans.\n              </p>\n            </div>\n\n            {/* Onboarding Steps */}\n            <div className=\"p-8\">\n              <h4 className=\"text-lg font-semibold text-gray-900 mb-6 text-center\">\n                Getting Started is Easy\n              </h4>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n                {/* Step 1 */}\n                <div className=\"text-center\">\n                  <div className=\"bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-blue-600 font-bold text-lg\">1</span>\n                  </div>\n                  <h5 className=\"font-semibold text-gray-900 mb-2\">Create Your Team</h5>\n                  <p className=\"text-sm text-gray-600\">\n                    Set up your team with name, age group, level, and region\n                  </p>\n                </div>\n\n                {/* Step 2 */}\n                <div className=\"text-center\">\n                  <div className=\"bg-green-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-green-600 font-bold text-lg\">2</span>\n                  </div>\n                  <h5 className=\"font-semibold text-gray-900 mb-2\">Add Your Roster</h5>\n                  <p className=\"text-sm text-gray-600\">\n                    Add players with positions and jersey numbers\n                  </p>\n                </div>\n\n                {/* Step 3 */}\n                <div className=\"text-center\">\n                  <div className=\"bg-purple-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-purple-600 font-bold text-lg\">3</span>\n                  </div>\n                  <h5 className=\"font-semibold text-gray-900 mb-2\">Start Tracking</h5>\n                  <p className=\"text-sm text-gray-600\">\n                    Track games and get AI-powered practice plans\n                  </p>\n                </div>\n              </div>\n\n              {/* Features */}\n              <div className=\"bg-gray-50 rounded-lg p-6 mb-6\">\n                <h5 className=\"font-semibold text-gray-900 mb-4\">What you can do with teams:</h5>\n                <ul className=\"space-y-2 text-sm text-gray-600\">\n                  <li className=\"flex items-start\">\n                    <svg className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span><strong>Track live games</strong> with detailed event logging</span>\n                  </li>\n                  <li className=\"flex items-start\">\n                    <svg className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span><strong>Manage player rosters</strong> with positions and numbers</span>\n                  </li>\n                  <li className=\"flex items-start\">\n                    <svg className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span><strong>Generate AI practice plans</strong> based on game performance</span>\n                  </li>\n                  <li className=\"flex items-start\">\n                    <svg className=\"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span><strong>View analytics</strong> and track team progress over time</span>\n                  </li>\n                </ul>\n              </div>\n\n              {/* CTA */}\n              <div className=\"text-center\">\n                <button\n                  onClick={() => router.push('/demo/teams/new')}\n                  className=\"bg-blue-600 text-white px-8 py-4 rounded-md font-medium hover:bg-blue-700 transition-colors inline-flex items-center gap-2 text-lg\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                  </svg>\n                  Create Your First Team\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {teams.map((team) => (\n              <div\n                key={team.id}\n                className=\"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6 cursor-pointer\"\n                onClick={() => router.push(`/demo/teams/${team.id}`)}\n              >\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-xl font-bold text-gray-900\">{team.name}</h3>\n                    <p className=\"text-sm text-gray-500 mt-1\">{team.season}</p>\n                  </div>\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\n                    {team.age_group_display}\n                  </span>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center text-sm\">\n                    <span className=\"text-gray-500 w-20\">Level:</span>\n                    <span className=\"font-medium text-gray-900 uppercase\">\n                      {team.level}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center text-sm\">\n                    <span className=\"text-gray-500 w-20\">Region:</span>\n                    <span className=\"font-medium text-gray-900 uppercase\">\n                      {team.region}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center text-sm\">\n                    <span className=\"text-gray-500 w-20\">Role:</span>\n                    <span className=\"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800\">\n                      {team.role.replace('_', ' ')}\n                    </span>\n                  </div>\n                </div>\n\n                {/* Team Stats */}\n                <div className=\"mt-4 flex gap-3\">\n                  <div className=\"flex items-center text-sm text-gray-600\">\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                    </svg>\n                    <span className=\"font-medium\">{team.playerCount || 0}</span>\n                    <span className=\"ml-1\">players</span>\n                  </div>\n                  <div className=\"flex items-center text-sm text-gray-600\">\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                    </svg>\n                    <span className=\"font-medium\">{team.gameCount || 0}</span>\n                    <span className=\"ml-1\">games</span>\n                  </div>\n                </div>\n\n                {/* Quick Actions */}\n                <div className=\"mt-4 pt-4 border-t border-gray-200 flex gap-2\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      router.push(`/demo/teams/${team.id}/roster`)\n                    }}\n                    className=\"flex-1 text-center text-blue-600 hover:bg-blue-50 py-2 rounded-md font-medium text-sm transition-colors\"\n                  >\n                     Roster\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      selectTeam(team.id)\n                      router.push('/demo/game-tracking')\n                    }}\n                    className=\"flex-1 text-center text-green-600 hover:bg-green-50 py-2 rounded-md font-medium text-sm transition-colors\"\n                  >\n                     Track Game\n                  </button>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      router.push(`/demo/teams/${team.id}/settings`)\n                    }}\n                    className=\"text-gray-600 hover:bg-gray-50 px-3 py-2 rounded-md transition-colors\"\n                    title=\"Team Settings\"\n                  >\n                    \n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}